<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Mouse Position</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.tailwindcss.com"></script>
    <style type="text/tailwindcss">
        @layer utilities {
            .cell-px-1 :is(th, td) {
                @apply px-1;
            }
        }
    </style>
    <style>
        #info-box::before {
            content: "";
            position: absolute;
            width: 100%;
            height: 100%;
            left: 0;
            top: 0;
            background-color: hsla(0, 0%, 100%, 0.9);
            backdrop-filter: blur(2px);
            z-index: -1;
        }
    </style>
</head>

<body class="bg-slate-100 py-16 pb-[calc(4rem_+_20vh)]">

<div id="info-box"
    style="--width: 275px; --height: 295px;"
    class="fixed z-10 rounded shadow-xl overflow-hidden p-3 top-4 left-[50%] translate-x-[-50%] select-none w-[var(--width)] h-[var(--height)] pointer-events-none border border-gray-200/75 border-l-gray-200 border-r-gray-200 border-b-gray-300/75"
    >
    <table class="cell-px-1 w-full">
        <tr>
            <td>
                screen
                <span class="opacity-50">(size)</span>
            </td>
            <td>:</td>
            <td id="screen-size">9999 x 9999</td>
        </tr>
        <tr>
            <td>
                viewport
                <span class="opacity-50">(size)</span>
            </td>
            <td>:</td>
            <td id="viewport-size"></td>
        </tr>
        <tr>
            <td>
                viewport
                <span class="opacity-50">(pos)</span>
            </td>
            <td>:</td>
            <td id="viewport-xy"></td>
        </tr>
        <tr>
            <td colspan="3"><hr></td>
        </tr>
        <tr>
            <td>
                screen
                <span class="opacity-50">(monitor)</span>
            </td>
            <td>:</td>
            <td id="screen-xy"></td>
        </tr>
        <tr>
            <td>
                client
                <span class="opacity-50">(viewport)</span>
            </td>
            <td>:</td>
            <td id="client-xy"></td>
        </tr>
        <tr>
            <td>
                x, y
                <span class="opacity-50">(viewport)</span>
            </td>
            <td>:</td>
            <td id="xy-xy"></td>
        </tr>
        <tr>
            <td>
                page
                <span class="opacity-50">(document)</span>
            </td>
            <td>:</td>
            <td id="page-xy"></td>
        </tr>
        <tr>
            <td class="line-through" title="non-standard">
                layer
            </td>
            <td>:</td>
            <td id="layer-xy"></td>
        </tr>
        <tr>
            <td>
                offset
                <span class="opacity-50">(target)</span>
            </td>
            <td>:</td>
            <td id="offset-xy"></td>
        </tr>
        <tr>
            <td colspan="3"><hr></td>
        </tr>
        <tr>
            <td>
                scroll
                <span class="opacity-50">(target)</span>
            </td>
            <td>:</td>
            <td id="scroll-xy"></td>
        </tr>
    </table>
</div>

<main class="max-w-[800px] mx-auto p-4">
    
    <section class="bg-white rounded shadow p-4">
        
        <h1 class="font-semibold text-xl bg-red-50">
            <a
                href="https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent"
                target="_blank"
                class="underline"
                >MouseEvent</a>
        </h1>
        
        <p class="mt-4 bg-green-50">The MouseEvent interface represents events that occur due to the user interacting with a pointing device (such as a mouse). Common events using this interface include click, dblclick, mouseup, mousedown.</p>
        
        <p class="mt-4 bg-green-50">MouseEvent derives from UIEvent, which in turn derives from Event. Though the MouseEvent.initMouseEvent() method is kept for backward compatibility, creating of a MouseEvent object should be done using the MouseEvent() constructor.</p>
        
        <p class="mt-4 bg-green-50">Several more specific events are based on MouseEvent, including WheelEvent, DragEvent, and PointerEvent.</p>
        
    </section>
    
    <section class="bg-white rounded shadow p-4 mt-16">
        
        <h2 class="font-semibold text-lg bg-red-50">Instance properties</h1>
        
        <div class="overflow-auto max-h-[400px] mt-4 p-4">
            
            <dl class="bg-green-100/50 p-4 w-[800px]">
                <dt class="bg-blue-100/50">MouseEvent.screenX</dt>
                <dd class="bg-blue-100/50 mt-4 ml-8">The X coordinate of the mouse pointer in screen coordinates.</dd>
            </dl>
                
            <dl class="mt-4 bg-green-100/50 p-4">
                <dt class="bg-blue-100/50">MouseEvent.clientX</dt>
                <dd class="bg-blue-100/50 mt-4 ml-8">The X coordinate of the mouse pointer in viewport coordinates.</dd>
            </dl>
            
            <dl class="mt-4 bg-green-100/50 p-4">
                <dt class="bg-blue-100/50">MouseEvent.x</dt>
                <dd class="bg-blue-100/50 mt-4 ml-8">Alias for MouseEvent.clientX.</dd>
            </dl>
            
            <dl class="mt-4 bg-green-100/50 p-4">
                <dt class="bg-blue-100/50">MouseEvent.pageX</dt>
                <dd class="bg-blue-100/50 mt-4 ml-8">The X coordinate of the mouse pointer relative to the whole document.</dd>
            </dl>
            
            <dl class="mt-4 bg-green-100/50 p-4">
                <dt class="bg-blue-100/50">
                    MouseEvent.layerX
                    <span class="opacity-50">(non-standard)</span>
                </dt>
                <dd class="bg-blue-100/50 mt-4 ml-8">Returns the horizontal coordinate of the event relative to the current layer.</dd>
            </dl>
            
            <dl class="mt-4 bg-green-100/50 p-4">
                <dt class="bg-blue-100/50">MouseEvent.offsetX</dt>
                <dd class="bg-blue-100/50 mt-4 ml-8">The X coordinate of the mouse pointer relative to the position of the padding edge of the target node.</dd>
            </dl>
            
        </div>
        
    </section>
    
    <section class="bg-white rounded shadow p-4 mt-16">
        
        <h2 class="font-semibold text-lg bg-red-50">Position in target's scroll area</h1>
        
        <p class="mt-4 bg-green-50">offsetX and offsetY returns the mouse pointer position without taking the scroll into consideration.</p>
        
        <p class="mt-4 bg-green-50">If one wishes to get pointer position relative to the scroll area, just like pageX and pageY (when body scrolls), one needs to do the following.</p>
        
        <pre class="bg-gray-100 p-2 rounded mt-4 whitespace-pre-line">
            let scrollX = e.offsetX + e.target.scrollLeft;
            let scrollY = e.offsetY + e.target.scrollTop;
        </pre>
        
    </section>
    
</main>

<script>
    let cells = {
        screenSize   : document.querySelector("#screen-size"),
        viewportSize : document.querySelector("#viewport-size"),
        viewportXY   : document.querySelector("#viewport-xy"),
        screen  : document.querySelector("#screen-xy"),
        client  : document.querySelector("#client-xy"),
        xy      : document.querySelector("#xy-xy"),
        page    : document.querySelector("#page-xy"),
        layer   : document.querySelector("#layer-xy"),
        offset  : document.querySelector("#offset-xy"),
        scroll  : document.querySelector("#scroll-xy"),
    };
    
    cells.screenSize.textContent   = [screen.width, screen.height].join(" × ");
    cells.viewportSize.textContent = [innerWidth, innerHeight].join(" × ");
    cells.viewportXY.textContent   = [screenX, screenY].join(" × ");
    window.addEventListener("resize", () => {
        cells.viewportSize.textContent = [innerWidth, innerHeight].join(" × ");
    });
    window.addEventListener("move", () => {
        cells.viewportXY.textContent = [screenX, screenY].join(" × ");
    });
    
    window.addEventListener("mousemove", (e) => {
        cells.screen.textContent = [e.screenX, e.screenY].join(", ");
        cells.client.textContent = [e.clientX, e.clientY].join(", ");
        cells.page.textContent   = [e.pageX, e.pageY].join(", ");
        cells.layer.textContent  = [e.layerX, e.layerY].join(", ");
        cells.offset.textContent = [e.offsetX, e.offsetY].join(", ");
        cells.xy.textContent     = [e.x, e.y].join(", ");
        cells.scroll.textContent = getTargetScrollPos(e).join(", ");
        unmarkMarkedElements();
        markEventTarget(e);
    });
    
    function getTargetScrollPos(e) {
        return [
            e.offsetX + e.target.scrollLeft,
            e.offsetY + e.target.scrollTop,
        ];
    }
    
    function markEventTarget(e) {
        e.target.classList.add(
            "outline",
            "outline-2",
            "outline-dashed",
            "outline-gray-800/80",
            "-outline-offset-1",
        );
    }
    
    function unmarkMarkedElements() {
        Array.from(document.querySelectorAll(".outline-dashed")).forEach(el => {
            el.classList.remove(
                "outline",
                "outline-2",
                "outline-dashed",
                "outline-gray-800/80",
                "-outline-offset-1",
            );
        });
    }
    
</script>

<script>
    // fake window move event
    (() => {
        let previousScreenX = screenX;
        let previousScreenY = screenY;
        setInterval(() => {
            let currentScreenX = screenX;
            let currentScreenY = screenY;
            if (currentScreenX !== previousScreenX || currentScreenY !== previousScreenY) {
                window.dispatchEvent(new CustomEvent("move"));
            }
            previousScreenX = currentScreenX;
            previousScreenY = currentScreenY;
        }, 250);
    })();
</script>

</body>

</html>